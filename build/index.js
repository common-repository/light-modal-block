(()=>{var e,l={979:(e,l,o)=>{"use strict";const t=window.wp.blocks;var a=o(942),i=o.n(a);const r=window.wp.i18n,n=window.wp.blockEditor,d=window.wp.element,s=window.wp.components,c=window.wp.data,h=window.wp.editor;let g=e=>crypto.getRandomValues(new Uint8Array(e));const u=()=>((e,l=21)=>((e,l,o)=>{let t=(2<<Math.log(e.length-1)/Math.LN2)-1,a=-~(1.6*t*l/e.length);return(i=l)=>{let r="";for(;;){let l=o(a),n=a;for(;n--;)if(r+=e[l[n]&t]||"",r.length===i)return r}}})(e,l,g))("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",11)(),b=()=>(0,c.useSelect)((e=>{const l=[],o=e(n.store).getBlocks(),t=e=>{e?.innerBlocks&&e.innerBlocks.forEach((e=>{"cloudcatch/light-modal-block"===e.name&&l.push(e),t(e)}))};return o.forEach((e=>{"cloudcatch/light-modal-block"===e.name&&l.push(e),t(e)})),l})),p=window.ReactJSXRuntime,m=(0,s.withNotices)((function(e){const{attributes:l,setAttributes:o,isSelected:t,clientId:a}=e,{id:g,label:m,width:k,backdropColor:_,enableCloseButton:w,triggerDelay:x,enableTriggerDelay:v,triggerSelector:f,cookieDuration:j}=l,C=b();(0,d.useEffect)((()=>{const e=C.filter(((e,l,o)=>o.find((l=>l.attributes.id===e.attributes.id&&l.clientId!==e.clientId))));if(!(e.length<=1))for(let l=1;l<e.length;l++)(0,c.dispatch)("core/block-editor").updateBlockAttributes(e[l].clientId,{id:u()})}),[a,C]);const[y,B]=(0,d.useState)(!1),S=(0,n.__experimentalUseMultipleOriginColorsAndGradients)(),M=(0,c.useSelect)((e=>{const{getCurrentPostType:l}=e(h.store);return l()}),[]),P=(0,d.useRef)(null),[E,I]=(0,d.useState)(!1),T=(0,c.useSelect)((e=>{const{hasSelectedInnerBlock:l}=e(n.store);return l(a,!0)}),[a]);(0,d.useEffect)((()=>{g||o({id:u()})}),[g,o]),(0,d.useEffect)((()=>{t||T?I(!0):"wp_block"!==M||y?I(!1):(B(!0),I(!0))}),[t,T,M]);const[N]=(0,n.useSettings)("spacing.units"),O=(0,s.__experimentalUseCustomUnits)({availableUnits:N||["%","px","em","rem","vw"]}),A=Number.isFinite(k)?k+"%":k,D=(0,n.useBlockProps)({style:A?{maxWidth:A}:void 0}),U={ref:P,role:"dialog","aria-modal":!0,className:i()("wp-block-cloudcatch-light-modal-block__wrapper",{"is-open":E}),style:_?{backgroundColor:_}:void 0,"data-trigger-delay":v?x:void 0,"data-trigger-selector":f||void 0,"data-cookie-duration":j||void 0,"data-modal-id":g};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(n.InspectorControls,{children:[(0,p.jsxs)(s.PanelBody,{children:[(0,p.jsxs)("p",{className:"wp-block-cloudcatch-light-modal-block__editor-id",children:[(0,r.__)("Modal ID","light-modal-block"),": ",(0,p.jsx)("code",{children:g})]}),(0,p.jsx)(s.TextControl,{label:(0,r.__)("Modal Label","light-modal-block"),value:m,placeholder:(0,r.__)("New Modal","light-modal-block"),onChange:e=>o({label:e}),help:(0,r.__)("Used to differentiate modals from one another","light-modal-block")}),(0,p.jsx)(s.__experimentalUnitControl,{label:(0,r.__)("Width"),labelPosition:"edge",__unstableInputWidth:"80px",value:k||"",onChange:e=>{e=0>parseFloat(e)?"0":e,o({width:e})},units:O}),(0,p.jsx)(s.ToggleControl,{label:(0,r.__)("Show close button","light-modal-block"),checked:w||!1,onChange:()=>{o({enableCloseButton:!w})}})]}),(0,p.jsxs)(s.PanelBody,{title:(0,r.__)("Triggers","light-modal-block"),children:[(0,p.jsx)(s.ToggleControl,{label:(0,r.__)("Show modal on page load","light-modal-block"),checked:v||!1,onChange:()=>{o({enableTriggerDelay:!v})}}),v&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.__experimentalUnitControl,{label:(0,r.__)("Delay","light-modal-block"),labelPosition:"edge",__unstableInputWidth:"80px",value:x,placeholder:"0",onChange:e=>o({triggerDelay:e}),unit:"ms",units:{ms:{value:"ms",label:"ms",default:"",a11yLabel:(0,r.__)("Milliseconds (ms)"),step:1}}}),(0,p.jsx)(s.__experimentalUnitControl,{label:(0,r.__)("Cookie duration","light-modal-block"),labelPosition:"edge",__unstableInputWidth:"80px",value:j,help:(0,r.__)("Duration in minutes before this modal will appear again after being closed. Leave blank to always show this modal.","light-modal-block"),placeholder:"0",onChange:e=>o({cookieDuration:e}),unit:"min",units:{ms:{value:"min",label:"min",default:"",a11yLabel:(0,r.__)("Minutes (min)"),step:1}}})]}),(0,p.jsx)(s.TextControl,{label:(0,r.__)("Selector","light-modal-block"),value:f,onChange:e=>o({triggerSelector:e}),style:{fontFamily:"monospace"}})]})]}),(0,p.jsx)(n.InspectorControls,{group:"color",children:(0,p.jsx)(n.__experimentalColorGradientSettingsDropdown,{__experimentalIsRenderedInSidebar:!0,settings:[{colorValue:_,label:(0,r.__)("Backdrop","light-modal-block"),onColorChange:e=>o({backdropColor:e}),isShownByDefault:!0,enableAlpha:!0,resetAllFilter:()=>({backdropColor:void 0})}],panelId:a,...S})}),(0,p.jsx)("div",{...U,children:(0,p.jsxs)("div",{...D,children:[(0,p.jsx)("div",{...(0,n.useInnerBlocksProps)({className:"wp-block-cloudcatch-light-modal-block__content"})}),w&&(0,p.jsx)("button",{className:"wp-block-cloudcatch-light-modal-block__close",onClick:()=>{I(!1)},children:(0,p.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",children:(0,p.jsx)(s.Path,{d:"M24 1.2 22.8 0 12 10.8 1.2 0 0 1.2 10.8 12 0 22.8 1.2 24 12 13.2 22.8 24l1.2-1.2L13.2 12 24 1.2z"})})})]})})]})})),k=JSON.parse('{"UU":"cloudcatch/light-modal-block"}'),_=window.wp.primitives,w=(0,p.jsxs)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[(0,p.jsx)(_.Path,{d:"M6.4 12.1h11.2v1.5H6.4zM6.5 15.5h11.2V17H6.5z"}),(0,p.jsx)(_.Path,{d:"M23.2 4.5c0-2.1-1.7-3.7-3.7-3.7-1 0-2 .4-2.7 1.2-.3.3-.5.7-.7 1H5c-1.1 0-1.9.9-1.9 2v14c0 1.1.8 2 1.9 2h14.1c1.1 0 1.9-.9 1.9-1.9V7.9c1.3-.5 2.2-1.8 2.2-3.4zM19.5 19c0 .2-.2.4-.4.4H5c-.2 0-.4-.2-.4-.4V5c0-.2.2-.4.4-.4h10.8c0 2.1 1.7 3.7 3.7 3.7V19zm0-12.2c-1.2 0-2.2-1-2.2-2.2 0-.6.2-1.1.6-1.5.4-.5 1-.7 1.6-.7 1.2 0 2.2 1 2.2 2.2s-1 2.2-2.2 2.2z"})]}),x=window.wp.plugins,v=(0,p.jsx)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(_.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})}),f=(0,p.jsx)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(_.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})});(0,x.registerPlugin)("light-modal-block",{render:function(){const e=b(),{selectBlock:l,removeBlock:o}=(0,c.useDispatch)(n.store);return(0,p.jsx)(h.PluginSidebar,{name:"plugin-sidebar-test",title:(0,r.__)("Modals","light-modal-block"),icon:w,children:(0,p.jsxs)("div",{className:"plugin-sidebar-content",children:[e.length>0&&e.map(((e,t)=>(0,p.jsx)("div",{children:(0,p.jsx)(s.Card,{className:"light-modal-block__card",children:(0,p.jsxs)(s.CardBody,{children:[(0,p.jsx)(s.__experimentalHeading,{size:4,children:e.attributes.label||(0,r.__)("New Modal","light-modal-block")}),(0,p.jsxs)("div",{children:[(0,p.jsx)(s.Button,{icon:v,label:(0,r.__)("Edit Modal","light-modal-block"),onClick:()=>l(e.clientId)}),(0,p.jsx)(s.Button,{icon:f,label:(0,r.__)("Remove Modal","light-modal-block"),onClick:()=>o(e.clientId)})]})]})})},t))),e.length<1&&(0,p.jsx)(s.Card,{isBorderless:!0,children:(0,p.jsx)(s.CardBody,{children:(0,p.jsx)("p",{children:(0,r.__)("There are no modals on this page","light-modal-block")})})})]})})}});const j=window.wp.hooks,C=window.wp.compose,y=["core/button","core/image","core/heading","core/group"],B=(0,C.createHigherOrderComponent)((e=>l=>{const{name:o,attributes:t,setAttributes:a}=l,i=b(),d=i.filter((e=>t?.modalEnabled===e?.attributes?.id))[0],{selectBlock:h}=(0,c.useDispatch)(n.store),g=[{label:(0,r.__)("Select Modal","light-modal-block"),value:""},...i.map((e=>({label:e?.attributes?.label||(0,r.__)("New Modal","light-modal-block"),value:e?.attributes?.id})))];return y.includes(o)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(e,{...l}),"cloudcatch/light-modal-block"!==o&&(0,p.jsx)(n.InspectorAdvancedControls,{children:(0,p.jsxs)(s.BaseControl,{children:[(0,p.jsx)(s.ToggleControl,{label:(0,r.__)("Show Modal on Click","light-modal-block"),checked:t?.modalTriggerEnabled||!1,onChange:()=>{a({modalTriggerEnabled:!t?.modalTriggerEnabled})}}),t?.modalTriggerEnabled&&(0,p.jsx)(s.SelectControl,{label:(0,r.__)("Modal","light-modal-block"),value:t?.modalEnabled,options:g,onChange:e=>{a({modalEnabled:e})}}),null!=d&&(0,p.jsx)(s.Button,{label:(0,r.__)("Edit Modal","light-modal-block"),variant:"secondary",onClick:()=>h(d.clientId),children:(0,r.__)("Open Modal","light-modal-block")})]})})]}):(0,p.jsx)(e,{...l})}),"withInspectorControl");(0,j.addFilter)("blocks.registerBlockType","cloudcatch/LightModalBlockAttributes",((e,l)=>(void 0!==e?.attributes&&y.includes(l)&&(e.attributes={...e.attributes,modalTriggerEnabled:{type:"boolean",default:!1},modalEnabled:{type:"string"}}),e))),(0,j.addFilter)("editor.BlockEdit","cloudcatch/LightModalBlockAdvancedControls",B),(0,j.addFilter)("blocks.getSaveContent.extraProps","cloudcatch/LightModalBlockAttributes",((e,l,o)=>{const{modalTriggerEnabled:t,modalEnabled:a}=o;return!0===t&&null!=a?{...e,"data-trigger-modal":a}:e})),(0,t.registerBlockType)(k.UU,{edit:m,save:function(e){const{attributes:l}=e,{id:o,width:t,backdropColor:a,enableCloseButton:r,triggerDelay:d,enableTriggerDelay:c,triggerSelector:h,cookieDuration:g}=l,u=Number.isFinite(t)?t+"%":t,b=n.useBlockProps.save({style:u?{maxWidth:u}:void 0}),m={role:"dialog","aria-modal":!0,className:i()("wp-block-cloudcatch-light-modal-block__wrapper"),style:a?{backgroundColor:a}:void 0,"data-trigger-delay":c?d:void 0,"data-trigger-selector":h||void 0,"data-cookie-duration":g||void 0,"data-modal-id":o};return(0,p.jsx)("div",{...m,children:(0,p.jsxs)("div",{...b,children:[(0,p.jsx)("div",{...n.useInnerBlocksProps.save({className:"wp-block-cloudcatch-light-modal-block__content"})}),r&&(0,p.jsx)("button",{className:"wp-block-cloudcatch-light-modal-block__close",children:(0,p.jsx)(s.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",children:(0,p.jsx)(s.Path,{d:"M24 1.2 22.8 0 12 10.8 1.2 0 0 1.2 10.8 12 0 22.8 1.2 24 12 13.2 22.8 24l1.2-1.2L13.2 12 24 1.2z"})})})]})})},icon:w})},942:(e,l)=>{var o;!function(){"use strict";var t={}.hasOwnProperty;function a(){for(var e="",l=0;l<arguments.length;l++){var o=arguments[l];o&&(e=r(e,i(o)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var l="";for(var o in e)t.call(e,o)&&e[o]&&(l=r(l,o));return l}function r(e,l){return l?e?e+" "+l:e+l:e}e.exports?(a.default=a,e.exports=a):void 0===(o=function(){return a}.apply(l,[]))||(e.exports=o)}()}},o={};function t(e){var a=o[e];if(void 0!==a)return a.exports;var i=o[e]={exports:{}};return l[e](i,i.exports,t),i.exports}t.m=l,e=[],t.O=(l,o,a,i)=>{if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],i=e[c][2];for(var n=!0,d=0;d<o.length;d++)(!1&i||r>=i)&&Object.keys(t.O).every((e=>t.O[e](o[d])))?o.splice(d--,1):(n=!1,i<r&&(r=i));if(n){e.splice(c--,1);var s=a();void 0!==s&&(l=s)}}return l}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,a,i]},t.n=e=>{var l=e&&e.__esModule?()=>e.default:()=>e;return t.d(l,{a:l}),l},t.d=(e,l)=>{for(var o in l)t.o(l,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:l[o]})},t.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={57:0,350:0};t.O.j=l=>0===e[l];var l=(l,o)=>{var a,i,r=o[0],n=o[1],d=o[2],s=0;if(r.some((l=>0!==e[l]))){for(a in n)t.o(n,a)&&(t.m[a]=n[a]);if(d)var c=d(t)}for(l&&l(o);s<r.length;s++)i=r[s],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(c)},o=self.webpackChunklight_modal_block=self.webpackChunklight_modal_block||[];o.forEach(l.bind(null,0)),o.push=l.bind(null,o.push.bind(o))})();var a=t.O(void 0,[350],(()=>t(979)));a=t.O(a)})();